"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9787],{9787:(_,u,r)=>{r.r(u),r.d(u,{MapPageModule:()=>A});var m=r(6895),c=r(4719),n=r(5616),p=r(8359),e=r(6738),d=r(7556),g=r(4742);let h=(()=>{class t{constructor(o,i,a){this.authService=o,this.appService=i,this.alertController=a}canActivate(o,i){return this.authService.idToken.length>0||this.appService.openModal()}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(d.e),e.LFG(g.z),e.LFG(n.Br))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=r(5861),f=r(8261),y=r(4530);let C=(()=>{class t{constructor(o,i,a){this.mapService=o,this.stationService=i,this.modalCtrl=a,this.days=15,this.close=()=>{this.modalCtrl.dismiss(!1)},this.decreaseDays=()=>{this.stationService.maxPriceAge-=this.stationService.maxPriceAge>0?1:0},this.increaseDays=()=>{this.stationService.maxPriceAge++},this.apply=()=>{this.modalCtrl.dismiss(!0)}}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(f.S),e.Y36(y.v),e.Y36(n.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map-filter"]],decls:25,vars:2,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],[1,"station-label","ion-no-margin"],[1,"ion-no-margin",3,"ngModel","ngModelChange"],["size","small",1,"square-button",3,"click"],[1,"days-input","ion-text-center",3,"ngModel","ngModelChange"],[2,"height","56px"],["color","primary",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Filtrar postos"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return i.close()}),e._UZ(6,"ion-icon",2),e.qZA()()()(),e.TgZ(7,"ion-content",3)(8,"ion-item")(9,"ion-label",4),e._uU(10,"Mostrar postos sem pre\xe7o "),e.qZA(),e.TgZ(11,"ion-checkbox",5),e.NdJ("ngModelChange",function(l){return i.mapService.showEmptyPrices=l}),e.qZA()(),e.TgZ(12,"ion-item"),e._uU(13," N\xe3o mostrar pre\xe7os com mais de "),e.TgZ(14,"ion-button",6),e.NdJ("click",function(){return i.decreaseDays()}),e._uU(15,"-"),e.qZA(),e.TgZ(16,"ion-input",7),e.NdJ("ngModelChange",function(l){return i.stationService.maxPriceAge=l}),e.qZA(),e.TgZ(17,"ion-button",6),e.NdJ("click",function(){return i.increaseDays()}),e._uU(18,"+"),e.qZA(),e._uU(19," dias "),e.qZA()(),e.TgZ(20,"ion-footer",8)(21,"ion-toolbar")(22,"ion-buttons",0)(23,"ion-button",9),e.NdJ("click",function(){return i.apply()}),e._uU(24," Aplicar "),e.qZA()()()()),2&o&&(e.xp6(11),e.Q6J("ngModel",i.mapService.showEmptyPrices),e.xp6(5),e.Q6J("ngModel",i.stationService.maxPriceAge))},dependencies:[c.JJ,c.On,n.YG,n.Sm,n.nz,n.W2,n.fr,n.Gu,n.gu,n.pK,n.Ie,n.Q$,n.wd,n.sr,n.w,n.j9],styles:[".days-input[_ngcontent-%COMP%]{--padding-top:0;--padding-bottom:0;max-width:30px}"]}),t})();function S(t,s){if(1&t&&(e.TgZ(0,"ion-select-option",16),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o.name," ")}}const P=[{path:"",component:(()=>{class t{constructor(o,i,a,l,F){var M=this;this.appService=o,this.mapService=i,this.authService=a,this.platform=l,this.modalCtrl=F,this.showFilterModal=(0,v.Z)(function*(){const Z=yield M.modalCtrl.create({component:C,backdropDismiss:!1});Z.present();const{data:b}=yield Z.onWillDismiss();b&&M.mapService.updateMarkers()})}ionViewDidEnter(){var o=this;console.log("ionViewDidEnter"),this.platform.ready().then(()=>{console.log("platform ready"),this.mapService.map?(console.log("existing map"),this.mapService.map.setDiv("map-canvas")):(console.log("new map"),this.mapService.currentPosition.subscribe(function(){var i=(0,v.Z)(function*(a){yield o.mapService.createMap("map-canvas",a.lat,a.lng,"main"),o.mapService.addSimpleMarker(a.lat,a.lng),o.mapService.setEvents()});return function(a){return i.apply(this,arguments)}}()),this.mapService.getCurrentPosition()),this.appService.getFuelList(),this.appService.getPaymentList()})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(g.z),e.Y36(f.S),e.Y36(d.e),e.Y36(n.t4),e.Y36(n.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-map"]],decls:34,vars:4,consts:[["side","start","content-id","main-screen"],["menuClose","",3,"click"],["routerLink","/profile"],["slot","start",2,"scale",".75"],["referrerpolicy","no-referrer",3,"src"],["id","main-screen",1,"ion-page","map-page"],["slot","start"],["slot","primary"],["color","primary",3,"click"],["slot","icon-only","name","funnel"],["interface","popover",3,"ngModel","compareWith","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["id","map-canvas"],["id","map-canvas-hidden"],["id","footer"],["src","//www.profitabledisplayformat.com/watchnew?key=5016b984cb0dea604afd3a1eb085b274","width","320","height","50","frameborder","0","scrolling","no"],[3,"value"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),e._uU(4," PostoBarato "),e.qZA()()(),e.TgZ(5,"ion-content")(6,"ion-menu-toggle")(7,"ion-list")(8,"ion-item"),e._uU(9," Menu item "),e.qZA(),e.TgZ(10,"ion-item",1),e.NdJ("click",function(){return i.showFilterModal()}),e._uU(11," Filtrar postos "),e.qZA(),e.TgZ(12,"ion-item",2)(13,"ion-avatar",3),e._UZ(14,"img",4),e.qZA(),e.TgZ(15,"ion-label"),e._uU(16," Perfil "),e.qZA()()()()()(),e.TgZ(17,"div",5)(18,"ion-header")(19,"ion-toolbar")(20,"ion-title"),e._uU(21," PostoBarato "),e.qZA(),e.TgZ(22,"ion-buttons",6),e._UZ(23,"ion-menu-button"),e.qZA(),e.TgZ(24,"ion-buttons",7)(25,"ion-button",8),e.NdJ("click",function(){return i.showFilterModal()}),e._UZ(26,"ion-icon",9),e.qZA(),e.TgZ(27,"ion-select",10),e.NdJ("ngModelChange",function(l){return i.appService.currentFuel=l})("ionChange",function(){return i.mapService.updateMarkers()}),e.YNc(28,S,2,2,"ion-select-option",11),e.qZA()()()(),e.TgZ(29,"ion-content"),e._UZ(30,"div",12)(31,"div",13),e.qZA()(),e.TgZ(32,"ion-footer",14),e._UZ(33,"iframe",15),e.qZA()),2&o&&(e.xp6(14),e.s9C("src",i.authService.user.photo,e.LSH),e.xp6(13),e.Q6J("ngModel",i.appService.currentFuel)("compareWith",i.appService.compareName),e.xp6(1),e.Q6J("ngForOf",i.appService.fuelSelector))},dependencies:[m.sg,c.JJ,c.On,n.BJ,n.YG,n.Sm,n.W2,n.fr,n.Gu,n.gu,n.Ie,n.Q$,n.q_,n.z0,n.fG,n.zc,n.t9,n.n0,n.wd,n.sr,n.QI,n.YI,p.rH],styles:["#map-canvas[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;z-index:20}#map-canvas-hidden[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;z-index:10}.map-page[_ngcontent-%COMP%]{position:relative;height:100%}#footer[_ngcontent-%COMP%]{height:50px;display:flex;align-items:center;justify-content:center}"]}),t})()},{path:"details",loadChildren:()=>r.e(9203).then(r.bind(r,9203)).then(t=>t.DetailsPageModule)},{path:"edit",loadChildren:()=>r.e(7922).then(r.bind(r,7922)).then(t=>t.EditPageModule),canActivate:[h]}];let T=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(P),p.Bz]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[h],imports:[m.ez,c.u5,n.Pc,T]}),t})()}}]);