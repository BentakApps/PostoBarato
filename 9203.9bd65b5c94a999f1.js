"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9203],{9203:(z,f,i)=>{i.r(f),i.d(f,{DetailsPageModule:()=>j});var g=i(6895),x=i(4719),t=i(5616),r=i(8359),T=i(5861),v=i(2986),e=i(6738),y=i(4530),A=i(8261),P=i(6475);const U=["photo"];function D(n,a){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-grid")(2,"ion-row")(3,"ion-col")(4,"p",9),e._uU(5),e.qZA()(),e.TgZ(6,"ion-col")(7,"p",9),e._uU(8),e.qZA()()()()()),2&n){const o=e.oxw(2);e.xp6(5),e.hij(" Etanol / Gasolina: ",o.etanolgasolina,"% "),e.xp6(3),e.hij(" Mais barato: ","?"==o.etanolgasolina?"?":+o.etanolgasolina>=70?"G":"E"," ")}}function S(n,a){if(1&n&&(e.TgZ(0,"ion-item-sliding")(1,"ion-item")(2,"ion-grid")(3,"ion-row")(4,"ion-col",10)(5,"h1",9),e._uU(6),e.qZA(),e.TgZ(7,"p",9),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",11)(10,"h1",9),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"p",9),e._uU(14),e.qZA()(),e.TgZ(15,"ion-col",12),e._UZ(16,"ion-icon",13),e.qZA()()()(),e.TgZ(17,"ion-item-options")(18,"ion-item-option",14),e._UZ(19,"ion-icon",15),e._uU(20," Certo "),e.qZA(),e.TgZ(21,"ion-item-option",16),e._UZ(22,"ion-icon",17),e._uU(23," Errado "),e.qZA(),e.TgZ(24,"ion-item-option",18),e._UZ(25,"ion-icon",19),e._uU(26," Editar "),e.qZA()()()),2&n){const o=a.$implicit,s=e.oxw(2);e.xp6(6),e.hij(" ",o.symbol," "),e.xp6(2),e.hij(" ",o.type," "),e.xp6(3),e.hij(" ",e.xi3(12,4,o.price/1e3,"1.2-2")," "),e.xp6(3),e.hij(" ",o.payment.length==s.appService.paymentList.length?"Todas as formas de pagamento":o.payment.join(", ")," ")}}function b(n,a){if(1&n&&(e.TgZ(0,"ion-card")(1,"ion-card-header"),e._UZ(2,"iframe",4,5),e.TgZ(4,"ion-card-title"),e._uU(5),e.qZA(),e.TgZ(6,"ion-card-subtitle"),e._uU(7),e.qZA()(),e.TgZ(8,"ion-card-content")(9,"ion-list"),e.YNc(10,D,9,2,"ion-item",2),e.YNc(11,S,27,7,"ion-item-sliding",6),e.TgZ(12,"ion-item",7)(13,"h1",8),e._uU(14," + "),e.qZA()()()()()),2&n){const o=e.oxw();e.xp6(5),e.hij(" ",o.place.name," "),e.xp6(2),e.hij(" ",o.place.address," "),e.xp6(3),e.Q6J("ngIf","?"!=o.etanolgasolina),e.xp6(1),e.Q6J("ngForOf",o.place.prices)}}const M=[{path:"",component:(()=>{class n{constructor(o,s,c,u){this.stationService=o,this.mapService=s,this.appService=c,this.router=u}ngOnInit(){var o=this;console.log("DETAILS ON INIT"),this.routerSubscription=this.router.events.subscribe(function(){var s=(0,T.Z)(function*(c){if(console.log("ROUTER EVENT"),c instanceof r.m2&&"/map/details"==c.url){console.log("NAVIGATION END");const u=yield o.stationService.currentStation.pipe((0,v.q)(1)).toPromise();console.log(u),o.place=u.place,console.log(o.place);const d=o.place.prices?o.place.prices.filter(l=>"Etanol"==l.fuel):[],m=o.place.prices?o.place.prices.filter(l=>"Gasolina"==l.fuel):[],h=d.length>0?d.reduce((l,p)=>p.price<l?p.price:l,d[0].price):null,Z=m.length>0?m.reduce((l,p)=>p.price<l?p.price:l,m[0].price):null;o.etanolgasolina=h&&Z?(h/Z*100).toFixed(0).toString():"?",o.appService.hideLoading()}});return function(c){return s.apply(this,arguments)}}())}ngAfterViewInit(){this.photoChangesSubscription=this.photo.changes.subscribe(o=>{console.log(o.length),console.log(o._results),o.length>0&&o.first.nativeElement.setAttribute("src",this.place.pano_id?"https://www.google.com/maps/embed/v1/streetview?key="+this.mapService.keys.release+"&pano="+this.place.pano_id+"&heading="+this.place.heading+"&fov=90":"")})}ngOnDestroy(){console.log("DESTROY"),this.routerSubscription.unsubscribe(),this.photoChangesSubscription.unsubscribe()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(y.v),e.Y36(A.S),e.Y36(P.z),e.Y36(r.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-details"]],viewQuery:function(o,s){if(1&o&&e.Gf(U,5),2&o){let c;e.iGM(c=e.CRH())&&(s.photo=c)}},decls:11,vars:1,consts:[["slot","start"],["scroll-y","false"],[4,"ngIf"],["id","footer"],["width","100%","height","200","frameborder","0","loading","lazy","allowfullscreen","","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["photo",""],[4,"ngFor","ngForOf"],["button","","routerLink","/map/edit"],[1,"ion-text-center",2,"width","100%"],[1,"ion-text-center"],["size","5"],["size","6"],["size","1",1,"align-center-middle"],["name","chevron-back-outline"],["color","success",2,"font-size","8px"],["name","checkmark-outline","slot","top",2,"font-size","24px"],["color","danger",2,"font-size","8px"],["name","close-outline","slot","top",2,"font-size","24px"],[2,"font-size","8px"],["name","pencil-outline","slot","top",2,"font-size","24px"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3," PostoBarato "),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-back-button"),e.qZA()()(),e.TgZ(6,"ion-content",1),e.YNc(7,b,15,4,"ion-card",2),e.qZA(),e.TgZ(8,"ion-footer",3)(9,"p"),e._uU(10," Anucie aqui! "),e.qZA()()),2&o&&(e.xp6(7),e.Q6J("ngIf",!s.appService.loading))},dependencies:[g.sg,g.O5,t.oU,t.Sm,t.PM,t.FN,t.Zi,t.tO,t.Dq,t.wI,t.W2,t.fr,t.jY,t.Gu,t.gu,t.Ie,t.u8,t.IK,t.td,t.q_,t.Nd,t.wd,t.sr,t.cs,t.YI,r.rH,g.JJ],styles:["ion-item[_ngcontent-%COMP%]{--inner-padding-start:0;--inner-padding-end:0;--padding-start:0}#footer[_ngcontent-%COMP%]{height:50px;display:flex;align-items:center;justify-content:center}.align-center-middle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-card[_ngcontent-%COMP%]{max-height:100%;display:flex;flex-direction:column}ion-card[_ngcontent-%COMP%] > ion-card-content[_ngcontent-%COMP%]{flex:auto;overflow:scroll}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[r.Bz.forChild(M),r.Bz]}),n})(),j=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,x.u5,t.Pc,O]}),n})()}}]);