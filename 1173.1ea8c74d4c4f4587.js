"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1173],{1173:(S,f,u)=>{u.r(f),u.d(f,{AnpPageModule:()=>N});var m=u(6895),d=u(4719),i=u(5616),h=u(8359),g=u(5861),t=u(6738),v=u(3811),A=u(2982),y=u(8261);const b=["photo"];function T(e,p){if(1&e&&(t.TgZ(0,"ion-select-option",15),t._uU(1),t.qZA()),2&e){const n=p.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n," ")}}function w(e,p){if(1&e&&(t.TgZ(0,"ion-select-option",15),t._uU(1),t.qZA()),2&e){const n=p.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n," ")}}function P(e,p){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item",16)(1,"ion-thumbnail",0),t._UZ(2,"iframe",17,18),t.qZA(),t.TgZ(4,"ion-list",19),t.NdJ("click",function(){const c=t.CHM(n).$implicit,o=t.oxw(2);return t.KtG(o.moveCamera(+c.controls.lat.value,+c.controls.lng.value))}),t.TgZ(5,"ion-item",16)(6,"ion-label",20),t._uU(7,"name: "),t.qZA(),t._UZ(8,"ion-input",21),t.qZA(),t.TgZ(9,"ion-item",16)(10,"ion-label",20),t._uU(11,"address: "),t.qZA(),t._UZ(12,"ion-input",22),t.qZA(),t.TgZ(13,"ion-item",16)(14,"ion-grid",23)(15,"ion-row",24)(16,"ion-col",25)(17,"ion-label",20),t._uU(18,"route: "),t.qZA(),t._UZ(19,"ion-input",26),t.qZA(),t.TgZ(20,"ion-col",27)(21,"ion-label",20),t._uU(22,"number: "),t.qZA(),t._UZ(23,"ion-input",28),t.qZA()()()(),t.TgZ(24,"ion-item",16)(25,"ion-grid",23)(26,"ion-row",24)(27,"ion-col",25)(28,"ion-label",20),t._uU(29,"neighborhood: "),t.qZA(),t._UZ(30,"ion-input",29),t.qZA(),t.TgZ(31,"ion-col",27)(32,"ion-label",20),t._uU(33,"postal_code: "),t.qZA(),t._UZ(34,"ion-input",30),t.qZA()()()(),t.TgZ(35,"ion-item",16)(36,"ion-grid",23)(37,"ion-row",24)(38,"ion-col",25)(39,"ion-label",20),t._uU(40,"city: "),t.qZA(),t._UZ(41,"ion-input",31),t.qZA(),t.TgZ(42,"ion-col",27)(43,"ion-label",20),t._uU(44,"state: "),t.qZA(),t._UZ(45,"ion-input",32),t.qZA()()()(),t.TgZ(46,"ion-item",16)(47,"ion-grid",23)(48,"ion-row",24)(49,"ion-col",25)(50,"ion-label",20),t._uU(51,"lat: "),t.qZA(),t._UZ(52,"ion-input",33),t.qZA(),t.TgZ(53,"ion-col",34)(54,"ion-label",20),t._uU(55,"lng: "),t.qZA(),t._UZ(56,"ion-input",35),t.qZA()()()(),t.TgZ(57,"ion-item",16)(58,"ion-grid",23)(59,"ion-row",24)(60,"ion-col",25)(61,"ion-label",20),t._uU(62,"must_delete "),t.qZA(),t.TgZ(63,"ion-checkbox",36),t.NdJ("ionChange",function(l){const o=t.CHM(n).index,a=t.oxw(2);return t.KtG(a.convertToNumber(l,"must_delete",o))}),t.qZA()(),t.TgZ(64,"ion-col",34)(65,"ion-label",20),t._uU(66,"possible_duplicate "),t.qZA(),t.TgZ(67,"ion-checkbox",37),t.NdJ("ionChange",function(l){const o=t.CHM(n).index,a=t.oxw(2);return t.KtG(a.convertToNumber(l,"possible_duplicate",o))}),t.qZA()()()()()()()}if(2&e){const n=p.$implicit;t.xp6(2),t.s9C("id",n.controls.id.value),t.xp6(2),t.Q6J("formGroup",n)}}const Z=function(){return{size:"cover"}};function U(e,p){if(1&e){const n=t.EpF();t.TgZ(0,"div")(1,"div",4)(2,"ion-select",5),t.NdJ("ionChange",function(l){t.CHM(n);const c=t.oxw();return t.KtG(c.onFileChange(l))}),t.YNc(3,T,2,2,"ion-select-option",6),t.qZA(),t.TgZ(4,"ion-button")(5,"label",7),t._uU(6,"Upload"),t.qZA(),t.TgZ(7,"input",8),t.NdJ("change",function(l){t.CHM(n);const c=t.oxw();return t.KtG(c.onFileUpload(l))})("click",function(l){t.CHM(n);const c=t.oxw();return t.KtG(c.onClickReset(l))}),t.qZA()(),t.TgZ(8,"ion-button",9),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.deleteFile())}),t.TgZ(9,"label"),t._uU(10," Delete "),t.qZA()(),t.TgZ(11,"ion-select",5),t.NdJ("ionChange",function(l){t.CHM(n);const c=t.oxw();return t.KtG(c.onCityChange(l))}),t.YNc(12,w,2,2,"ion-select-option",6),t.qZA()(),t.TgZ(13,"div",10),t._UZ(14,"div",11),t.TgZ(15,"div",12)(16,"ion-list",13),t.YNc(17,P,68,2,"ion-item",14),t.qZA(),t.TgZ(18,"ion-button",9),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.onSubmit())}),t._uU(19,"Submit"),t.qZA()()()()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("interfaceOptions",t.DdM(6,Z)),t.xp6(1),t.Q6J("ngForOf",n.directory),t.xp6(8),t.Q6J("interfaceOptions",t.DdM(7,Z)),t.xp6(1),t.Q6J("ngForOf",n.cities),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("ngForOf",n.stationControls)}}const M=[{path:"",component:(()=>{class e{constructor(n,s,l,c){var o=this;this.appService=n,this.networkService=s,this.mapService=l,this.fb=c,this.form=this.fb.group({stations:this.fb.array([])}),this.directory=[],this.cities=[],this.selectedFile="",this.selectedCity="",this.moveCamera=(a,r)=>{console.log(a,r),this.mapService.map.animateCamera({target:{lat:a,lng:r}}),this.mapService.simpleMarker.remove(),this.mapService.addSimpleMarker(a,r)},this.convertToNumber=(a,r,_)=>{this.stations.controls[_].get(r).setValue(a.detail.checked?1:0,{emitEvent:!1})},this.deleteFile=(0,g.Z)(function*(){o.directory=(yield o.networkService.deleteFile(o.selectedFile)).data}),this.onFileChange=function(){var a=(0,g.Z)(function*(r){console.log(r),console.log(r.detail.value),o.selectedFile=r.detail.value,o.selectedFile&&(o.cities=(yield o.networkService.getCities(o.selectedFile)).data)});return function(r){return a.apply(this,arguments)}}(),this.onFileUpload=function(){var a=(0,g.Z)(function*(r){console.log(r),console.log(r.target.files[0]);const _=r.target.files[0],C=new FormData;C.append("file",_,_.name);const x=yield o.networkService.uploadExcel(C);o.directory=x.data,console.log(x)});return function(r){return a.apply(this,arguments)}}(),this.onClickReset=a=>{a.target.value=""},this.onCityChange=function(){var a=(0,g.Z)(function*(r){console.log(r),console.log(r.detail.value),o.selectedCity=r.detail.value;const _=yield o.networkService.getExcelStations(o.selectedFile,o.selectedCity);o.excelStations=_.data,console.log(o.excelStations)});return function(r){return a.apply(this,arguments)}}()}ngOnInit(){var n=this;return(0,g.Z)(function*(){n.directory=(yield n.networkService.getDirectory()).data})()}ngAfterViewInit(){}ngOnDestroy(){console.log("DESTROY"),this.photoChangesSubscription.unsubscribe()}get stations(){return this.form.controls.stations}get stationControls(){return this.stations.controls}onSubmit(){var n=this;return(0,g.Z)(function*(){console.log(n.form);const s=n.stations.controls.map(c=>{const o=c.controls;let a={place_id:o.place_id.value};for(let r in o)o[r].dirty&&(a[r]=o[r].value);return a});console.log(s);const l=yield n.networkService.updateDuplicates(s);console.log(l),n.networkService.updateStations()})()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.z),t.Y36(A.S),t.Y36(y.S),t.Y36(d.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-anp"]],viewQuery:function(n,s){if(1&n&&t.Gf(b,5),2&n){let l;t.iGM(l=t.CRH())&&(s.photos=l)}},decls:10,vars:1,consts:[["slot","start"],[4,"ngIf"],["id","footer"],["src","//www.profitabledisplayformat.com/watchnew?key=5016b984cb0dea604afd3a1eb085b274","width","320","height","50","frameborder","0","scrolling","no"],[1,"toolbar"],["interface","popover",3,"interfaceOptions","ionChange"],[3,"value",4,"ngFor","ngForOf"],["for","fileInput"],["type","file","id","fileInput",1,"ion-hide",3,"change","click"],[3,"click"],[1,"main"],["id","map-canvas",1,"map"],[3,"formGroup"],["formArrayName","stations",1,"station-list"],["class","station-item",4,"ngFor","ngForOf"],[3,"value"],[1,"station-item"],["width","100%","height","200","frameborder","0","loading","lazy","allowfullscreen","","referrerpolicy","no-referrer-when-downgrade",2,"border","0",3,"id"],["photo",""],[1,"control-list",3,"formGroup","click"],[1,"station-label","ion-no-margin"],["type","text","formControlName","name",1,"station-input"],["type","text","formControlName","address",1,"station-input"],[1,"ion-no-padding"],[1,"ion-no-padding","ion-justify-content-between"],[1,"ion-no-padding","ion-justify-content-start","ion-align-items-center"],["type","text","formControlName","route",1,"station-input"],["size","4",1,"ion-no-padding","ion-justify-content-end","ion-align-items-center"],["type","text","formControlName","number",1,"station-input"],["type","text","formControlName","neighborhood",1,"station-input"],["type","text","formControlName","postal_code",1,"station-input"],["type","text","formControlName","city",1,"station-input"],["type","text","formControlName","state",1,"station-input"],["type","text","formControlName","lat",1,"station-input"],[1,"ion-no-padding","ion-justify-content-end","ion-align-items-center"],["type","text","formControlName","lng",1,"station-input"],["formControlName","must_delete",1,"ion-no-margin",3,"ionChange"],["formControlName","possible_duplicate",1,"ion-no-margin",3,"ionChange"]],template:function(n,s){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3," PostoBarato "),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button"),t.qZA()()(),t.TgZ(6,"ion-content"),t.YNc(7,U,20,8,"div",1),t.qZA(),t.TgZ(8,"ion-footer",2),t._UZ(9,"iframe",3),t.qZA()),2&n&&(t.xp6(7),t.Q6J("ngIf",!s.appService.isLoading))},dependencies:[m.sg,m.O5,d.JJ,d.JL,i.oU,i.YG,i.Sm,i.nz,i.wI,i.W2,i.fr,i.jY,i.Gu,i.pK,i.Ie,i.Q$,i.q_,i.Nd,i.t9,i.n0,i.Bs,i.wd,i.sr,i.w,i.QI,i.j9,i.cs,d.sg,d.u,d.CE],styles:["ion-thumbnail[_ngcontent-%COMP%]{width:500px;height:100%}.main[_ngcontent-%COMP%]{display:flex;flex-direction:row}.map[_ngcontent-%COMP%]{width:500px;height:690px}.station-list[_ngcontent-%COMP%]{height:650px;overflow:scroll}.control-list[_ngcontent-%COMP%]{height:100%}.station-item[_ngcontent-%COMP%]{--padding-top:0;--padding-bottom:0;--min-height:auto}.station-label[_ngcontent-%COMP%]{font-size:10px}.station-input[_ngcontent-%COMP%]{--padding-top:0;--padding-bottom:0;font-size:14px}ion-col[_ngcontent-%COMP%]{display:flex;flex-direction:row}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ion-select[_ngcontent-%COMP%]{flex-grow:1}.wider-popover[_ngcontent-%COMP%]   .popover-content[_ngcontent-%COMP%]{width:100%}label[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;padding-right:15.4px;padding-left:15.4px}ion-button[_ngcontent-%COMP%]{--padding-start:0;--padding-end:0}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(M),h.Bz]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,d.u5,i.Pc,q,d.UX]}),e})()}}]);